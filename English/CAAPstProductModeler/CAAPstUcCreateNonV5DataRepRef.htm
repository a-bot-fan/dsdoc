<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="en-us" http-equiv="Content-Language" />
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type" />
<meta name="topictype" content="Uc" />
<meta name="devlang" content="cpp" />
<link href="../CAADocStyleSheets/caav5.css" rel="stylesheet" type="text/css"/>
<script src="../CAADocJavaScript/DSDocTocToc.js" type="text/javascript">/* */</script>
<script src="../CAADocJavaScript/DSDocHighlight.js" type="text/javascript">/* */</script>
<script src="../CAADocJavaScript/submit.js" type="text/javascript">/* */</script>
<title>Creating a PLM Representation Reference with Non V5 Data</title>
</head>

<body onload="highlightSearchTerms();">

<table class="DocHeader">
	<tr>
		<td class="DocHeader1">
		<h1><a name="Top"></a>Creating a PLM Representation Reference with Non V5 
		Data</h1>
		</td>
	</tr>
	<tr>
		<td class="use">Use Case</td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<table class="abstract">
	<tr>
		<td>
		<h2>Abstract</h2>
		<p>This article shows how to create a PLM Representation Representation 
		whose the stream is created from a non V5 Data [<a href="#References">1</a>].</p>
		<ul>
			<li><a href="#Learn">What You Will Learn With This Use Case</a></li>
			<li><a href="#UseCase">The CAAPstCreateNonV5DataRepRef Use Case</a>
				<ul>
					<li><a href="#What">What Does CAAPstCreateNonV5DataRepRef Do</a></li>
					<li><a href="#How">How to Launch CAAPstCreateNonV5DataRepRef</a></li>
					<li><a href="#Where">Where to Find the CAAPstCreateNonV5DataRepRef 
						Code</a></li>
				</ul>
			</li>
			<li><a href="#Step">Step-by-Step</a></li>
			<li><a href="#InShort">In Short</a></li>
			<li><a href="#References">References</a></li>
		</ul>
		</td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Learn"></a>What You Will Learn With This Use Case</h2>
<p>This use case is intended to show you how create, and save in database, a PLM 
Representation Reference whose the main stream is created from a non V5 data. It 
can be a .model file, a word file and so one. The possible types are listed in the 
referenced technical article [<a href="#References">1</a>].</p>
<p>This representation is created in the <strong>PRODUCT</strong> Modeler.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="UseCase"></a>The CAAPstCreateNonV5DataRepRef Use Case</h2>
<p>CAAPstCreateNonV5DataRepRef is a use case of the CAAProductStructure.edu framework 
that mainly illustrates CAT3DPhysicalRepInterfaces and KnowledgeInterfaces frameworks 
capabilities.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="What"></a>What Does CAAPstCreateNonV5DataRepRef Do</h3>
<p>This use case creates a PLM Representation Reference whose the main descriptor 
is filled-up with an input file.</p>
<p><img alt="PLM Representation Reference " height="291" src="images/repref03.jpg" width="452"/></p>
<p>The PLM Representation Reference is created .</p>
<p>Here is an example with a .model file.</p>
<p>
<img alt="Product Reference " height="278" src="images/CAAPstCreateNonV5DataRepRep01.png" width="330"/></p>
<p>This picture shows a Product Reference, <code>CAAPstProduct</code> with one instance 
of the PLM Representation Reference whose the PLM_ExternalID attribute is <code>
CAAPstDitto</code>. This PLM Representation Reference has been created using the 
DITTOS.model file located in the InputData of the CAAProductStructure.edu framework.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="How"></a>How to Launch CAAPstCreateNonV5DataRepRef</h3>
<p>To launch CAAPstCreateNonV5DataRepRef, you will need to set up the build time 
environment, then compile CAAPstCreateNonV5DataRepRef along with its prerequisites, 
set up the run time environment, and then execute the use case [<a href="#References">2</a>].</p>
<p><code>mkrun -c &quot;CAAPstCreateNonV5DataRepRef Repository Server LoginTicket FileType FilePath&quot;</code></p>
<p>where the description of the arguments is the following:</p>
<table class="fill">
	<tr>
		<th>Repository</th>
		<td>
		<script type="text/javascript">insertRepository();</script>
		</td>
	</tr>
	<tr>
		<th>Server</th>
		<td>The server as ServerName:ServerPort/rootURI</td>
	</tr>
	<tr>
		<th>LoginTicket</th>
		<td>The string representing the LoginTicket</td>
	</tr>
	<tr>
		<th>FileType</th>
		<td>Type of the non CATIA V5 document</td>
	</tr>
	<tr>
		<th>FilePath</th>
		<td>Path + File name of the non CATIA document</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Where"></a>Where to Find the CAAPstCreateNonV5DataRepRef Code</h3>
<p>The CAAPstCreateNonV5DataRepRef use case is made of a single file located in 
the CAAPstCreateNonV5DataRepRef.m module of the CAAProductStructure.edu framework:</p>
<p><code>InstallRootFolder\CAAProductStructure.edu\CAAPstCreateNonV5DataRepRef.m\</code></p>
<p>where <code>InstallRootFolder</code> [<a href="#References">2</a>] is the folder 
where the API CD-ROM is installed.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Step"></a>Step-by-Step</h2>
<p>There are seven logical steps in CAAPstCreateNonV5DataRepRef use case. 
The prolog and epilog parts, which correspond to Creating/Closing a PLM session 
are already described in another document [<a href="#References">3</a>].</p>
<ol>
	<li><a href="#Step1">Retrieving the Representation Reference Factory</a></li>
	<li><a href="#Step2">Creating the Representation Reference</a></li>
	<li><a href="#Step3">Saving the Representation Reference</a></li>
</ol>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Step1"></a>Retrieving the Representation Reference Factory</h3>
<p>This step consists in to retrieve a pointer on the factory to create a Representation 
Refence with its attributes. This interface is <em>CATIPrdRepresentationReferenceFactory</em>.</p>
<pre class="code">...
<strong>CATIPrdRepresentationReferenceFactory</strong> * pIPrdRepRefFactory = NULL ;
rc = <strong>CATPrdFactory</strong>::<strong>CreatePrdFactory</strong>(IID_CATIPrdRepresentationReferenceFactory,
                                          (void**) &amp;pIPrdRepRefFactory);</pre>
<p>The <code>CreatePrdFactory</code> method of the <em>CATPrdFactory</em> class can 
retrieve several kind of factories. By specifying the IID of the <em>CATIPrdRepresentationReferenceFactory</em> 
interface as first argument, you have a <em>CATIPrdRepresentationReferenceFactory</em> 
interface pointer as output.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Step2"></a>Creating the Representation Reference</h3>
<p>We reach the goal of the use case: create the representation reference.</p>
<pre class="code">...
CATUnicodeString FileType  = iArgv[4] ;
CATUnicodeString FilePath  = iArgv[5] ;       
CATIPsiRepresentationReference * pPsiCreatedRepRef  = NULL ;
CATListValCATICkeParm_var  iPrdRepRefAttributesValues;
if ( FileType != "cgr" && FileType != "model")
{
   rc = pIPrdRepRefFactory-&gt;<strong>CreateNonCATIA</strong>(NULL ,iPrdRepRefAttributesValues,
				FileType ,FilePath, pPsiCreatedRepRef);
}
else 
{
  CATIType_var spRepType;
  CATCkePLMNavPublicServices::RetrieveKnowledgeType( "3DShape", spRepType );
  rc = pIPrdRepRefFactory-&gt;<strong>Create3DShapeFromCgrOrModel</strong>(spRepType,iPrdRepRefAttributesValues, 
				FileType ,FilePath, pPsiCreatedRepRef, NULL);
}
...
const CATICkeObject_var spCkeObjectOnRepRef = pPsiCreatedRepRef;
...
CATUnicodeString ValueAsString;
rc = CATCkeObjectAttrReadServices::GetValueAsString(spCkeObjectOnRepRef,"PLM_ExternalID",ValueAsString);
...</pre>
<p>The <code>CATIPrdRepresentationReferenceFactory::CreateNonCATIA</code> API used for all extensions except cgr and model takes 
following five arguments:</p>
<ol>
	<li>It is the pointer on the input environment of a <em>CATIAdpEnvironment</em>* 
		type, .This information is mandatory to create the PLM Representation reference 
		in the authoring customization associated with the Product Modeler and the 
		input environment. When it is passeda s NULL so it takes current environment 
		as input.</li>
	<li><code>iPrdRepRefAttributesValues</code> , a CATListValCATICkeParm_var type, 
		this list of PLM attributes must be empty since the PLM attributes of the 
		newly created object are valuated by the method.</li>
	<li><code>FileType</code>, a CATUnicodeString type, The type of the existing 
		non CATIA V5 file to add as Authoring Stream Descriptor (in the current 
		UC , the file type used is : model).</li>
	<li><code>FilePath</code>, a CATUnicodeString type, The file path of the existing 
		non CATIA V5 file (including the extension).</li>
	<li><code>pPsiCreatedRepRef</code>&nbsp;,a <em>CATIPsiRepresentationReference</em> 
		* type, an output argument which returns the created Representation Reference.</li>
</ol>
<p>The <code>CATIPrdRepresentationReferenceFactory::Create3DShapeFromCgrOrModel</code> API used for extensions cgr and model takes 
following six arguments:</p>
<ol>
    <li><code>spRepType</code>, the Knowledge type it can be a modeler type, a discipline at creation 
        of a functional specialization derived from 3DShape.</li>
	<li><code>iPrdRepRefAttributesValues</code> , a CATListValCATICkeParm_var type, 
		this list of PLM attributes must be empty since the PLM attributes of the 
		newly created object are valuated by the method.</li>
	<li><code>FileType</code>, a CATUnicodeString type, The type of the existing 
		non CATIA V5 file to add as Authoring Stream Descriptor (in the current 
		UC , the file type used is : model).</li>
	<li><code>FilePath</code>, a CATUnicodeString type, The file path of the existing 
		non CATIA V5 file (including the extension).</li>
	<li><code>pPsiCreatedRepRef</code>&nbsp;,a <em>CATIPsiRepresentationReference</em> 
		* type, an output argument which returns the created Representation Reference.</li>
    <li>It is the pointer on the input environment of a <em>CATIAdpEnvironment</em>* 
		type. When it is passed as NULL it takes current environment as input.</li>
</ol>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Step3"></a>Saving the Representation Reference</h3>
<p>The last step consists in to save the created PLM Component, the PLM Representation 
Reference. You use the <code>Save()</code> method of the <em>CATAdpSaver</em> class.</p>
<pre class="code">...
<strong>CATAdpSaver saver</strong>;
rc = <strong>saver.Save()</strong>;</pre>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="InShort"></a>In Short</h2>
<p>This use case uses the <code>CreateNonCATIA</code> method of the <em>CATIPrdRepresentationReferenceFactory</em> 
interface to create a PLM Representation Representation with Non V5 Data.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="References"></a>References</h2>
<table class="reference">
	<tr>
		<td>[1]</td>
		<td>
		<a href="../CAAPLMAllConcepts/CAAPLMTaAllRepresentation.htm">
		PLM Representation Reference</a></td>
	</tr>
	<tr>
		<td>[2]</td>
		<td>
		<a href="../CAADocUseCases/CAADocRunSample.htm">
		Building and Launching a Use Case</a></td>
	</tr>
	<tr>
		<td>[3]</td>
		<td>
		<a href="../CAAPlmServerAccess/CAAAdpUcBasicBatch.htm">
		Connecting to V6 Server</a></td>
	</tr>
	<tr>
		<td>[4]</td>
		<td>
		<a href="../CAAPLMAllConcepts/CAAPLMTaAllEnvironment.htm">
		Understanding PLM Environment</a></td>
	</tr>
	<tr>
		<td>[5]</td>
		<td>
		<a href="../CAAPlmPLMCompAttribute/CAAPLMTaAllKnowPLMAttributes.htm">
		Accessing PLM Attributes</a></td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="History"></a>History</h2>
<table class="history">
	<tr>
		<td>Version: <strong>1</strong> [Nov 2006]</td>
		<td>Document created</td>
	</tr>
	<tr>
		<td>Version: <strong>2</strong> [Nov 2010]</td>
		<td>Document updated due to new API for creation</td>
	</tr>
    <tr>
		<td>Version: <strong>3</strong> [Oct 2014]</td>
		<td>Document updated due to new API for connecting to V6 Server</td>
	</tr>
    <tr>
		<td>Version: <strong>4</strong> [Jan 2015]</td>
		<td>Document updated due to new API in <em>CATIPrdRepresentationReferenceFactory</em> 
            interface</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<script type="text/javascript">insertCopyright();</script>

</body>

</html>
